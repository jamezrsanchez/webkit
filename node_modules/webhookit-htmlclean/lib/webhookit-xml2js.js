var xml2js = require('xml2js-expat');

exports.run = function(params, cb) {
	
	var parser = new xml2js.Parser();
	parser.addListener('end', function(result) {
	    cb({out: result });
	});
 	parser.parseString(params.xml);

};


exports.definition = {
   "name": "xml2js",
	"category": "Sources",
   "container": {
		"icon": "/images/icons/building_go.png",
      "xtype": "WireIt.TextareaContainer",
		"title": "xml2js",
		"fields": [
			{"type": "text", "name": "xml", "wirable": true }
		],
		"terminals": [
		   {"name": "out", "direction": [0,1], "offsetPosition": {"left": 86, "bottom": -15}, "ddConfig": {
             "type": "output",
             "allowedTypes": ["input"]
          }
         }
	   ]
   }
};

